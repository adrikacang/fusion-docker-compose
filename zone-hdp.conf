#!/bin/sh

: ${default_port_offset:=0}
: ${NAME_NODE_PROXY_HOSTNAME:=$DOCKER_HOSTNAME}
: ${FUSION_NAME_NODE_PROXY_PORT:=$(expr 8890 + $default_port_offset)}

save_var INDUCTOR_TYPE "hdp" "$SAVE_ENV"

update_var NAME_NODE_PROXY_HOSTNAME "Enter the NameNode Proxy hostname for $ZONE_NAME" "${HOSTNAME:-fusion-nn-proxy.example.com}" validate_not_example
save_var FUSION_NAME_NODE_PROXY_PORT "$(expr 8890 + $default_port_offset)" "${SAVE_ENV}"
save_var FUSION_LIVEHIVE_PROXY_PORT "$(expr 9083 + $default_port_offset)" "${SAVE_ENV}"

update_var HADOOP_NAME_NODE_HOSTNAME "Enter the Hadoop NameNode IP or hostname for $ZONE_NAME" "namenode.example.com" validate_hostname
update_var HADOOP_NAME_NODE_PORT "Enter the NameNode port for $ZONE_NAME" "8020" validate_number

# update_var ZOOKEEPER_ENSEMBLE "Enter the zookeeper ensemble for $ZONE_NAME" "zook1.example.com:2181,zook2.example.com:2181,zook3.example.com:2181," validate_not_example
# update_var ZOOKEEPER_HOSTNAMES "Enter the zookeeper hostnames for $ZONE_NAME (comma delimited)" "zook1.example.com,zook2.example.com,zook3.example.com" validate_not_example
# update_var ZOOKEEPER_BROKER_PORT "Enter the zookeeper broker port for $ZONE_NAME" "2181" validate_number

update_var HIVE_METASTORE_HOSTNAME "Enter Hive Metastore hostname for $ZONE_NAME" "metastore.example.com" validate_not_example
update_var HIVE_METASTORE_PORT "Enter Hive Metastore port for $ZONE_NAME" "9083" validate_number

# TODO: advice on hive configuration steps & how to install hiveserver2_template
